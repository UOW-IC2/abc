<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Service Worker Example</title>
</head>
<body>
    <a href="https://site1.com:3001">site1</a>
    <a href="https://site2.com:3002">site2</a>

    <iframe id="myIframe" src="https://about.realestate.com.au/" width="600" height="400" sandbox="allow-same-origin"></iframe>

    <script>
        function reloadIframe(sandboxValue) {
            return new Promise((resolve)=>{
                const iframe = document.getElementById('myIframe');
                const startTime = Date.now(); 
    
                iframe.sandbox = sandboxValue;
    
                // iframe.style.display = "none";
    
                iframe.onload = function() {
                    const endTime = Date.now();
                    const loadTime = endTime - startTime;
                    console.log(`Iframe loaded with sandbox "${sandboxValue}" in ${loadTime} ms`);
                    resolve(loadTime);
                }
    
                iframe.src = iframe.src;
            });
        }

        reloadIframe("");
        reloadIframe("allow-same-origin");
    </script>
    
    <h1>Service Worker Caching Example</h1>
    <p>This image will be cached by the Service Worker:</p>
<!--     <img src="ok.jpg" alt="Image 3" style="width:300px;height:auto;">
    <img src="1.png" alt="Image 1" style="width:300px;height:auto;"> -->

<!--     <script src="get_script_time.js"></script> -->
<!--     <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script> -->
    <script src="https://site1.com:3001/long-term-id.js"></script>;


    </script>
    
    <!-- <script src="script.js"> -->
<!--     <script type="text/javascript">
        // JavaScript to redirect the page
        //window.location.href = "https://site2.com:3002/redirect.html";
    </script> -->

    <!-- <script>
        window.addEventListener('load', function() {
            let totalSize = 0;
            let id = '';
            let resources = performance.getEntriesByType('resource');

            resources.forEach((resource) => {
                if (resource.name === 'http://localhost:3001/ok.jpg') {
                    totalSize += resource.transferSize;
                    if (resource.transferSize > 0) {
                        id = id +'1';
                    } else {
                        id = id + '0';
                    }
                }
                if (resource.name === 'http://localhost:3001/1.png') {
                    totalSize += resource.transferSize;
                    
                    if (resource.transferSize > 0) {
                        id = id +'1';
                    } else {
                        id = id + '0';
                    }
                }
            });

            console.log('Sending total size:', totalSize);
            console.log('sending id:', id);
            // Send id to the parent window
            window.parent.postMessage({ id: id }, '*');
        });
    </script> -->
</body>
</html>

